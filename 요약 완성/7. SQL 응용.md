# 데이터베이스 기본

## **★** 트랜잭션의 특성

- 원자성(Atomicity) : 트랜잭션을 구성하는 연산 전체가 모두 정상적으로 실행되거나 모두 취소되어야 하는 성질[Commit/Rollback, 회복성 보장]
- 일관성(Consistency) : 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야 하는 성질[무결성 제약조건, 동시성 제어]
- 격리성 = 고립성(Isolation) : 동시에 실행되는 트랜잭션들이 서로 영향을 미치지 않아야 한다는 성질[Read Uncommitted, Read Committed, Repeatable Read, Serializable]
- 영속성(Durability) : 성공이 완료된 트랜잭션의 결과는 영속적으로 데이터베이스에 저장되어야 하는 성질[회복기법]

### **★** TCL 명령어

- 커밋 : 트랜잭션 확정[트랜잭션을 메모리에 영구적으로 저장하는 명령어]
- 롤백 : 트랜잭션 취소[트랜잭션 내역을 저장 무효화시키는 명령어]
- 체크포인트 : 저장 시기 설정[ROLLBACK을 위한 시점을 지정하는 명령어]

### **★** 병행 제어 기법의 종류

- 로킹(Locking) : 하나의 트랜잭션을 실행하는 동안 특정 데이터 항목에 대해서 다른 트랜잭션이 동시에 접근하지 못하도록 상호배제(Mutual Exclusion) 기능을 제공하는 기법.
- 낙관적 검증(Optimistic Validation) : 트랜잭션이 어떠한 검증도 수행하지 않고 일단 트랜잭션을 수행하고, 트랜잭션 종료 시 검증을 수행하여 데이터베이스에 반영하는 기법.
- 타임스탬프 순서(Time Stamp Ordering) : 트랜잭션과 트랜잭션이 읽거나 갱신한 데이터에 대해 트랜잭션이 실행을 시작하기 전에 타임 스탬프(Time Stamp)를 부여하여 부여된 시간에 따라 트랜잭션 작업을 수행하는 기법.
- 다중버전 동시성 제어(MVCC; Multi Version Concurrency Control) : 트랜잭션의 타임스탬프와 접근하려는 데이터의 타임스탬프를 비교하여 직렬가능성이 보장되는 적절한 버전을 선택하여 접근하도록 하는 기법.

## **★** 회복 기법(영속성 주요 기법)

- 개념 : 회복 기법은 트랜잭션을 수행하는 도중 장애로 인해 손상된 데이터베이스를 손상되기 이전의 정상적인 상태로 복구시키는 작업이다.

### **★** REDO, UNDO

- REDO : 트랜잭션의 시작과 완료에 대한 기록이 있는 트랜잭션들의 작업을 재작업하는 기법.
- UNDO : 트랜잭션의 시작은 있지만, 완료 기록이 없는 트랜잭션들이 작업한 변경 내용들을 모두 취소하는 기법.

### **★** 회복 기법 종류

- 로그 기반 회복 기법
  - 지연 갱신 회복 기법(Deferred Update) : 트랜잭션이 완료되기 전까지 데이터베이스에 기록하지 않는 기법.
  - 즉각 갱신 회복 기법(Immediate Update) : 트랜잭션 수행 중 갱신 결과를 바로 DB에 반영하는 기법.
- 체크 포인트 회복 기법(Checkpoint Recovery) : 장애 발생 시 검사점 이후에 처리된 트랜잭션에 대해서만 장애 발생 이전의 상태로 복원시키는 회복 기법.
- 그림자 페이징 회복 기법(Shadow Paging Recovery) : 데이터베이스 트랜잭션 수행 시 복제본을 생성하여 데이터베이스 장애 시 이를 이용해 복구하는 기법.

## **★** DDL의 대상

- 도메인(Domain) : 하나의 속성이 가질 수 있는 원자값들의 집합[속성의 데이터 타입과 크기, 제약조건 등의 정보]
- 스키마(Schema) : 데이터베이스 구조, 제약조건 등의 정보를 담고 있는 기본적인 구조
  - 외부 스키마(External Schema) : 사용자나 개발자의 관점에서 필요로 하는 데이터베이스의 논리적 구조[사용자 뷰를 나타냄, 서브 스키마로 불림]
  - 개념 스키마(Conceptual Schema) : 데이터베이스의 전체적인 논리적 구조[전체적인 뷰를 나타냄, (개체간의 관계, 제약조건, 접근 권한, 무결성, 보안)에 대해 정의]
  - 내부 스키마(Internal Schema) : 물리적 저장 장치의 관점에서 보는 데이터베이스 구조[실제로 데이터베이스에 저장될 레코드의 형식을 정의하고 저장 데이터 항목의 표현 방법, 내부 레코드의 물리적 순서 등을 표현]
- 테이블(Table) : 데이터 저장 공간
- 뷰(View) : 하나 이상의 물리 테이블에서 유도되는 가상의 테이블
- 인덱스(Index) : 검색을 빠르게 하기 위한 데이터 구조

#### **★** 인덱스의 개념

- 인덱스는 검색 연산의 최적화를 위해 데이터베이스 내 값에 대한 주소 정보로 구성된 데이터 구조이다.
- 데이터베이스 파일 구조는 순차 방법, 인덱스 방법, 해싱 방법이 있다.

## **★** 조인(Join)

- 내부 조인(Inner Join) : 공통 존재 컬럼의 값이 같은 경우를 추출하는 기법
- 외부 조인(Outer Join)
  - 왼쪽 외부 조인(Left Outer Join) : 왼쪽 테이블의 모든 데이터와 오른쪽 테이블의 동일 데이터를 추출하는 기법
  - 오른쪽 외부 조인(Right Outer Join) : 오른쪽 데이터의 모든 데이터와 왼쪽 테이블의 동일 데이터를 추출하는 기법
  - 완전 외부 조인(Full Outer Join) : 양쪽의 모든 데이터를 추출하는 기법
- 교차 조인(Cross Join) : 조인 조건이 없는 모든 데이터 조합을 추출하는 기법
- 셀프 조인(Self Join) : 자기 자신에게 별칭을 지정한 후 다시 조인하는 기법

## **★** GRANT(권한 부여) 명령어

- GRANT는 데이터베이스 관리자(DBA; Database Administrator)가 사용자에게 데이터베이스에 대한 권한을 부여하는 명령어이다.

- GRANT 권한 ON 테이블 TO 사용자;

## **★** REVOKE(권한 회수) 명령어

- REVOKE는 데이터베이스 관리자(DBA)가 사용자에게 부여했던 권한을 회수하기 위한 명령어이다.

- REVOKE 권한 ON 테이블 FROM 사용자;
